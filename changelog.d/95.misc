Updated the version of black in the CI and pre-commit, and adjusted CI steps to
account for recent versions of poetry.
