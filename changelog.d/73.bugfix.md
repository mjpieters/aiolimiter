Improve performance by using a single timeout and a heapq for blocked tasks.
This ensures only a single task needs to wake up per 'drip' of the bucket,
instead of creating timeouts for every task.
